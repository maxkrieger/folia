{"version":3,"sources":["calcifer/cards/turtle.svg","Data.ts","calcifer/CardClass.ts","calcifer/ThingCard.ts","calcifer/cards/Turtle.ts","calcifer/cards/Ball.ts","calcifer/icons/Duck.tsx","calcifer/icons/TurtleIcon.tsx","calcifer/AttributeCard.ts","calcifer/CardIndex.ts","calcifer/cards/Rainbow.ts","calcifer/icons/RainbowIcon.tsx","calcifer/cards/PenFollow.ts","calcifer/icons/BrushIcon.tsx","Card.tsx","calcifer/env.ts","Canvas.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","findByID","id","card","instanceid","child","undefined","deleteByID","shiftLeafX","leaf","x","dx","y","hasParent","coords","putIn","cards","sourceID","childID","map","c","find","console","error","filter","insertLeaf","CARD_WIDTH","GUTTER_SIZE","isUnrelated","id1","id2","head1","head2","lift","removed","angle","Math","random","depth","Card","name","this","uniqid","Thing","startMillis","Setup","setup","p","millis","drawableChildren","composite","Matter","Composite","create","label","Turtle","world","img","motionInterval","rotationInterval","moving","rainbowMode","penMode","enable","rainbow","penHistory","getEffect","cb","nb","World","add","payload","Body","applyForce","bodies","bodyA","allBodies","bodyB","bodyAHeight","bounds","max","min","bodyAWidth","bodyBHeight","bodyBWidth","Constraint","pointA","pointB","length","damping","stiffness","push","setMotionInterval","window","setInterval","randomGaussian","setRotationInterval","setAngularVelocity","debugBounds","vertices","fill","beginShape","forEach","vert","vertex","endShape","CLOSE","pop","handlePen","frameCount","position","reduce","acc","cur","ind","colorMode","HSB","stroke","strokeWeight","line","draw","F","Vector","rotate","setVelocity","angleMode","RADIANS","translate","tint","image","cancel","clearInterval","remove","loadImage","turtle","Bodies","rectangle","Ball","radius","scale","circle","Duck","color","width","height","viewBox","xmlns","d","TurtleIcon","AttributeCard","CardIndex","ball","pen","StaticCard","cardData","dropping","Icon","style","backgroundColor","display","justifyContent","border","alignItems","cursor","zIndex","Reactable","reactable","props","getRef","onSetCoords","ond","onLift","mousedown","allCards","isSingleton","selfcontain","left","top","opacity","transition","transform","boxSizing","touchAction","data-card-id","ref","onDrop","React","setDropping","setMousedown","isHead","dropzone","ondragenter","ondragleave","ondrop","relatedTarget","dataset","cardId","overlap","accept","draggableElement","draggable","inertia","onend","onmove","dy","modifiers","interact","restrictRect","restriction","document","body","onDown","onUp","CARD_HEIGHT","borderRadius","Env","mouse","mouseConstraint","canvas","engine","things","windowResized","resizeCanvas","windowWidth","windowHeight","constructed","construct","addThing","thing","createCanvas","Mouse","elt","mouseParams","constraint","angularStiffness","MouseConstraint","gravity","t","pixelRatio","pixelDensity","walls","isStatic","Engine","run","background","Canv","theref","sk","setSk","node","p5","e","sub","ps","Cl","Canvas","dropped","current","createCard","isTemplate","setAllCoords","setCoords","App","bottomY","allcards","innerHeight","Object","keys","index","useState","state","setState","prevState","found","dropDelete","deleted","key","parentID","findInAllByID","bottom","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"kFAAAA,EAAOC,QAAU,IAA0B,oC,muBCiBpC,IAcMC,EAAW,SAAXA,EAAYC,EAAYC,GAAb,OACtBA,EAAKC,aAAeF,EAChBC,EACAA,EAAKE,MACLJ,EAASC,EAAIC,EAAKE,YAClBC,GAEOC,EAAa,SAAbA,EAAcL,EAAYC,GAAb,OACxBA,EAAKC,aAAeF,OAChBI,EACAH,EAAKE,MAAL,KACKF,EADL,CACWE,MAAOE,EAAWL,EAAIC,EAAKE,SACtCF,GA4BOK,EAAa,SAAbA,EAAcC,EAASC,EAAWC,EAAYC,GAAjC,YACrBH,EADqB,CAExBI,WAAW,EACXC,OAAQ,CAAEF,IAAGF,KACbL,MAAOI,EAAKJ,MAAQG,EAAWC,EAAKJ,MAAOK,EAAIC,EAAIA,EAAIC,QAAKN,KAgBjDS,EAAQ,SAACC,EAAYC,EAAkBC,GAClD,IAAMT,EAAOO,EACVG,KAAI,SAACC,GAAD,OAAUnB,EAASiB,EAASE,MAChCC,MAAK,SAACD,GAAD,YAA4Bd,IAANc,KAC9B,YAAad,IAATG,GACFa,QAAQC,MAAR,0CAAiDL,IAC1CF,GAEDA,EACLG,KAAI,SAAChB,GAAD,OAAaI,EAAWW,EAASf,MACrCqB,QAAO,SAACrB,GAAD,YAAkCG,IAATH,KAA4BgB,KAC7D,SAAChB,GACC,YAAiCG,IAA7BL,EAASgB,EAAUd,GAzBH,SAAbsB,EAActB,EAASM,GAAV,YACTH,IAAfH,EAAKE,MAAL,KAESF,EAFT,CAGME,MAAOG,EACLC,EACAN,EAAKW,OAAOJ,EAAIgB,EAAaC,EAC7BD,EAAaC,EACbxB,EAAKW,OAAOF,KAPpB,KAUST,EAVT,CAUeE,MAAOoB,EAAWtB,EAAKE,MAAOI,KAehCgB,CAAWtB,EAAMM,GAEjBN,MAMFyB,EAAc,SAACZ,EAAYa,EAAaC,GACnD,IAAMC,EAAQf,EACXG,KAAI,SAACC,GAAD,OAAUnB,EAAS4B,EAAKT,MAC5BC,MAAK,SAACD,GAAD,YAA4Bd,IAANc,KACxBY,EAAQhB,EACXG,KAAI,SAACC,GAAD,OAAUnB,EAAS6B,EAAKV,MAC5BC,MAAK,SAACD,GAAD,YAA4Bd,IAANc,KAE9B,YAAcd,IAAVyB,QAAiCzB,IAAV0B,QAKA1B,IAAzBL,EAAS4B,EAAKG,SAAiD1B,IAAzBL,EAAS6B,EAAKC,IAI3CE,EAAO,SAACjB,EAAYd,GAC/B,IAAMO,EAAOO,EACVG,KAAI,SAACC,GAAD,OAAUnB,EAASC,EAAIkB,MAC3BC,MAAK,SAACD,GAAD,YAA4Bd,IAANc,KAE9B,QAAad,IAATG,EAEF,OADAa,QAAQC,MAAR,iCAAwCrB,IACjCc,EAET,IAAMkB,EAAUlB,EACbG,KAAI,SAAChB,GAAD,OAAaI,EAAWL,EAAIC,MAChCqB,QAAO,SAACrB,GAAD,YAAkCG,IAATH,KACnC,MAAM,GAAN,mBACK+B,GADL,MAEOzB,EAFP,CAEaI,WAAW,EAAOsB,MAAuB,GAAhBC,KAAKC,SAAgB,OAIhDC,EAAQ,SAARA,EAASnC,GAAD,OACnBA,EAAKE,MAAQiC,EAAMnC,EAAKE,OAAS,EAAI,G,8EClJTkC,EAK5B,WAAYC,GAAe,yBAJpBA,UAImB,OAHnBtC,QAGmB,OAFnBG,WAEmB,EACxBoC,KAAKD,KAAOA,EACZC,KAAKvC,GAAKwC,IAAOF,ICLSG,E,YAC5B,WAAYH,GAAe,IAAD,8BACxB,4CAAMA,KAGEI,aAAe,EAJC,EAMnBC,MAAQ,WACb,EAAKC,QACL,EAAKF,YAAc,EAAKG,EAAEC,UARF,EAcVD,OAdU,IAenBE,iBAA4B,GAfT,EAiBnBC,eAjBmB,EAExB,EAAKA,UAAYC,IAAOC,UAAUC,OAAO,CAAEC,MAAO,EAAKpD,KAF/B,E,2BADgBqC,G,mPCEvBgB,E,YAgFnB,WACER,EACAS,GAKC,IAAD,EAHA9C,EAGA,uDAHY,EACZE,EAEA,uDAFY,EACZP,EACA,mEACA,4CAAM,YAvFD0C,OAsFL,IArFKS,WAqFL,IApFK9C,OAoFL,IAnFKE,OAmFL,IAlFK6C,SAkFL,IAjFKC,oBAiFL,IAhFKC,sBAgFL,IA/EKC,QAAS,EA+Ed,EA9EKC,aAAc,EA8EnB,EA7EKC,QAAoE,CACzEC,QAAQ,EACRC,SAAS,EACTC,WAAY,IA0EZ,EAvEKC,UAAY,SAACC,GAClB,IAAMC,EAAK,IAAIb,EAAO,EAAKR,EAAG,EAAKS,MAAO,EAAK9C,EAAG,EAAKE,EAAG,EAAKP,OAC/D+D,EAAGvB,QACHM,IAAOkB,MAAMC,IAAI,EAAKd,MAAOY,EAAGlB,WAC5BkB,EAAG/D,OACL+D,EAAG/D,MAAM6D,WAAU,SAAC1B,EAAc+B,GA6BhC,GA5Ba,cAAT/B,GACFW,IAAOqB,KAAKC,WACVL,EAAGlB,UAAUwB,OAAO,GACpB,CAAEhE,EAAG,EAAGE,EAAG,GACX,CACEF,EAAG,EACHE,EAAG,IAAO2D,IAIH,YAAT/B,IACF4B,EAAGP,aAAc,GAEN,QAATrB,IACF4B,EAAGN,Q,yVAAH,IACKM,EAAGN,QADR,CAEEC,QAAQ,EACRC,QAASO,EAAQP,WAWjBO,aAAmB5B,EAAO,CAC5B,IAAMgC,EAAQxB,IAAOC,UAAUwB,UAAUR,EAAGlB,WAAW,GACjD2B,EAAQ1B,IAAOC,UAAUwB,UAAUL,EAAQrB,WAAW,GAC5DC,IAAOC,UAAUkB,IAAIF,EAAGlB,UAAWqB,EAAQrB,WAC3C,IAAM4B,EAAcH,EAAMI,OAAOC,IAAIpE,EAAI+D,EAAMI,OAAOE,IAAIrE,EACxDsE,EAAaP,EAAMI,OAAOC,IAAItE,EAAIiE,EAAMI,OAAOE,IAAIvE,EACnDyE,EAAcN,EAAME,OAAOC,IAAIpE,EAAIiE,EAAME,OAAOE,IAAIrE,EACpDwE,EAAaP,EAAME,OAAOC,IAAItE,EAAImE,EAAME,OAAOE,IAAIvE,EACrDyC,IAAOC,UAAUkB,IACfF,EAAGlB,UACHC,IAAOkC,WAAWhC,OAAO,CACvBsB,QACAE,QACAS,OAAQ,CAAE5E,EAAgB,EAAbwE,EAAgBtE,EAAiB,EAAdkE,GAChCS,OAAQ,CACN7E,GAAiB,GAAd0E,EACHxE,EAAiB,EAAduE,GAELK,OAAQ,EACRC,QAAS,GACTC,UAAW,MAGftB,EAAGnB,iBAAiB0C,KAAKpB,OAI/BJ,EAAG,EAAK3B,KAAM4B,IAUd,EAaKwB,kBAAoB,WACzB,EAAKlC,eAAiBmC,OAAOC,aAAY,WACvC,EAAKlC,QAAU,EAAKA,SACnB,EAAKb,EAAEgD,eAAe,IAAK,OAhB9B,EAkBKC,oBAAsB,WAC3B,EAAKrC,iBAAmBkC,OAAOC,aAAY,WACzC3C,IAAOqB,KAAKyB,mBACV,EAAK/C,UAAUwB,OAAO,GACtB,EAAK3B,EAAEgD,eAAe,EAAG,OAE1B,EAAKhD,EAAEgD,eAAe,IAAM,OAxB/B,EA2BKjD,MAAQ,aA3Bb,EA4BKoD,YAAc,WACnB,EAAKnD,EAAE4C,OADkB,IAEjBQ,EAAa,EAAKjD,UAAUwB,OAAO,GAAnCyB,SACR,EAAKpD,EAAEqD,KAAK,IAAK,IAAK,IAAK,IAC3B,EAAKrD,EAAEsD,aACPF,EAASG,SAAQ,SAAAC,GACf,EAAKxD,EAAEyD,OAAOD,EAAK7F,EAAG6F,EAAK3F,MAE7B,EAAKmC,EAAE0D,SAAS,EAAK1D,EAAE2D,OACvB,EAAK3D,EAAE4D,OArCP,EAuCKC,UAAY,WACjB,GAAI,EAAK7D,EAAE8D,WAAa,KAAO,EAAG,CAAC,IAAD,EACf,EAAK3D,UAAUwB,OAAO,GAAGoC,SAAlCpG,EADwB,EACxBA,EAAGE,EADqB,EACrBA,EACX,EAAKkD,QAAQG,WAAW0B,KAAK,CAC3BjF,IACAE,EAAGA,EAAI,KAGP,EAAKkD,QAAQC,QAAU,EAAKD,QAAQG,WAAWuB,OAAS,GAC1D,EAAK1B,QAAQG,WAAW8C,QAAO,SAACC,EAAKC,EAAKC,GAcxC,OAbA,EAAKnE,EAAE4C,OACP,EAAK5C,EAAEoE,UAAU,EAAKpE,EAAEqE,IAAK,KAC7B,EAAKrE,EAAEsE,OAAO,SACV,EAAKvD,QAAQE,SACf,EAAKjB,EAAEsE,QACJ,EAAKtE,EAAEC,SAAW,EAAKJ,YAAoB,IAANsE,GAAa,IACnD,IACA,KAGJ,EAAKnE,EAAEuE,aAAa,GACpB,EAAKvE,EAAEwE,KAAKP,EAAItG,EAAGsG,EAAIpG,EAAGqG,EAAIvG,EAAGuG,EAAIrG,GACrC,EAAKmC,EAAE4D,MACAM,MA9DX,EAkEKO,KAAO,WAEZ,IAAMC,EAAItE,IAAOuE,OAAOC,OACtBxE,IAAOuE,OAAOrE,OAAO,GAAI,GACzB,EAAKH,UAAUwB,OAAO,GAAGvC,OAE3BgB,IAAOqB,KAAKoD,YAAY,EAAK1E,UAAUwB,OAAO,GAAI+C,GAElD,EAAKb,YACL,EAAK7D,EAAE4C,OACP,EAAK5C,EAAE8E,UAAU,EAAK9E,EAAE+E,SACxB,EAAK/E,EAAEgF,UACL,EAAK7E,UAAUwB,OAAO,GAAGyB,SAAS,GAAGzF,EACrC,EAAKwC,UAAUwB,OAAO,GAAGyB,SAAS,GAAGvF,GAEvC,EAAKmC,EAAE4E,OAAO,EAAKzE,UAAUwB,OAAO,GAAGvC,OACnC,EAAK0B,cACP,EAAKd,EAAEoE,UAAU,EAAKpE,EAAEqE,IAAK,KAC7B,EAAKrE,EAAEiF,MAAM,EAAKjF,EAAEC,SAAW,EAAKJ,aAAe,IAAM,IAAK,MAEhE,EAAKG,EAAEkF,MAAM,EAAKxE,IAAK,EAAG,GAC1B,EAAKV,EAAE4D,MACP,EAAK1D,iBAAiBqD,SAAQ,SAAAjG,GAC5BA,EAAMmH,WAzFR,EA4FKU,OAAS,WACdrC,OAAOsC,cAAc,EAAKzE,gBAC1BmC,OAAOsC,cAAc,EAAKxE,kBAC1BR,IAAOkB,MAAM+D,OAAO,EAAK5E,MAAO,EAAKN,UAAUwB,OAAO,IAClD,EAAKrE,OACP,EAAKA,MAAM6H,UA/Fb,EAAK7H,MAAQA,EACb,EAAKK,EAAIA,EACT,EAAKE,EAAIA,EACT,EAAK4C,MAAQA,EACb,EAAKT,EAAIA,EACT,EAAKU,IAAM,EAAKV,EAAEsF,UAAUC,KAE5BnF,IAAOC,UAAUkB,IAAI,EAAKpB,UAAWC,IAAOoF,OAAOC,UAAU9H,EAAGE,EAAG,GAAI,KACvE,EAAKgF,oBACL,EAAKI,sBAXL,E,2BAvFgCrD,G,OCDf8F,E,YA4DnB,WACE1F,EACAS,GAKC,IAAD,EAHA9C,EAGA,uDAHY,EACZE,EAEA,uDAFY,EACZP,EACA,4DACA,4CAAM,UAnED0C,OAkEL,IAjEKS,WAiEL,IAhEKkF,YAgEL,IA/DKhI,OA+DL,IA9DKE,OA8DL,IA7DKsD,UAAY,SAACC,GAClB,IAAMC,EAAK,IAAIqE,EAAK,EAAK1F,EAAG,EAAKS,MAAO,EAAK9C,EAAG,EAAKE,EAAG,EAAKP,OAC7D+D,EAAGvB,QACHM,IAAOkB,MAAMC,IAAI,EAAKd,MAAOY,EAAGlB,WAC5BkB,EAAG/D,OACL+D,EAAG/D,MAAM6D,WAAU,SAAC1B,EAAc+B,GAmBhC,GAlBa,cAAT/B,GACFW,IAAOqB,KAAKC,WACVL,EAAGlB,UAAUwB,OAAO,GACpB,CAAEhE,EAAG,EAAGE,EAAG,GACX,CACEF,EAAG,EACHE,EAAG,IAAO2D,IAIH,QAAT/B,IACFW,IAAOqB,KAAKmE,MACVvE,EAAGlB,UAAUwB,OAAO,GACpBH,EAAUH,EAAGsE,OACbnE,EAAUH,EAAGsE,QAEftE,EAAGsE,OAASnE,GAEVA,aAAmB5B,EAAO,CAC5B,IAAMgC,EAAQxB,IAAOC,UAAUwB,UAAUR,EAAGlB,WAAW,GACjD2B,EAAQ1B,IAAOC,UAAUwB,UAAUL,EAAQrB,WAAW,GAC5DC,IAAOC,UAAUkB,IAAIF,EAAGlB,UAAWqB,EAAQrB,WAC3C,IAAM4B,EAAcH,EAAMI,OAAOC,IAAIpE,EAAI+D,EAAMI,OAAOE,IAAIrE,EACxDsE,EAAaP,EAAMI,OAAOC,IAAItE,EAAIiE,EAAMI,OAAOE,IAAIvE,EACnDyE,EAAcN,EAAME,OAAOC,IAAIpE,EAAIiE,EAAME,OAAOE,IAAIrE,EACpDwE,EAAaP,EAAME,OAAOC,IAAItE,EAAImE,EAAME,OAAOE,IAAIvE,EACrDyC,IAAOC,UAAUkB,IACfF,EAAGlB,UACHC,IAAOkC,WAAWhC,OAAO,CACvBsB,QACAE,QACAS,OAAQ,CAAE5E,EAAgB,EAAbwE,EAAgBtE,EAAiB,EAAdkE,GAChCS,OAAQ,CACN7E,GAAiB,GAAd0E,EACHxE,EAAiB,EAAduE,GAELK,OAAQ,EACRC,QAAS,GACTC,UAAW,MAGftB,EAAGnB,iBAAiB0C,KAAKpB,OAI/BJ,EAAG,EAAK3B,KAAM4B,IAUd,EAgBKoD,KAAO,WACZ,EAAKzE,EAAE6F,OACL,EAAK1F,UAAUwB,OAAO,GAAGoC,SAASpG,EAClC,EAAKwC,UAAUwB,OAAO,GAAGoC,SAASlG,EAClC,EAAK8H,QAEP,EAAKzF,iBAAiBqD,SAAQ,SAAAjG,GAC5BA,EAAMmH,WAvBR,EA0BKU,OAAS,WACV,EAAK7H,OACP,EAAKA,MAAM6H,UA5Bb,OAGA,EAAK7H,MAAQA,EACb,EAAKK,EAAIA,EACT,EAAKE,EAAIA,EACT,EAAK4C,MAAQA,EAEbL,IAAOC,UAAUkB,IACf,EAAKpB,UACLC,IAAOoF,OAAOK,OAAOlI,EAAGE,EAAG8H,KAE7B,EAAKA,OAVU,GAWf,EAAK3F,EAAIA,EAbT,E,6EAnE8BJ,GCYnBkG,EAfF,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OACX,uBACEC,MAAM,KACNC,OAAO,KACPC,QAAQ,cACR7C,KAAK,OACL8C,MAAM,8BAEN,wBACEC,EAAE,qzDACF/C,KAAM0C,MCEGM,EAZc,SAAC,GAAD,IAAGN,EAAH,EAAGA,MAAH,OAC3B,uBAAKC,MAAM,KAAKC,OAAO,MACrB,yBACE,yBACE,wBACEG,EAAE,kgHACF/C,KAAM0C,QCPcO,E,sIAAsB9G,GCcrC+G,EANG,CAChBhB,OAAQ,CAAC/E,EAAQ6F,GACjBG,KAAM,CAACd,EAAMI,GACb7E,QAAS,C,YCPT,WACEjB,EACAS,GAKA,gHAAC,IAAD,EADAnD,EACA,mEACA,4CAAM,aACDA,MAAQA,EAFb,E,uEAIe8D,GACX1B,KAAKpC,OACPoC,KAAKpC,MAAM6D,UAAUC,GAEvBA,EAAG,UAAW,Q,+BAGV1B,KAAKpC,OACPoC,KAAKpC,MAAM6H,a,GApBoBmB,GCFjB,SAAC,GAAD,IAAGP,EAAH,EAAGA,MAAH,OAClB,uBAAKG,QAAQ,cAAcF,MAAM,MAC/B,yBACE,wBACE3C,KAAM0C,EACNK,EAAE,wgBFMRK,IAAK,C,YGRL,WACEzG,EACAS,GAKA,gHAAC,IAAD,EADAnD,EACA,mEACA,4CAAM,SACDA,MAAQA,EAFb,E,uEAIe8D,GACX1B,KAAKpC,MACPoC,KAAKpC,MAAM6D,WAAU,SAAC1B,EAAM+B,GACb,YAAT/B,EACF2B,EAAG,MAAO,CAAEH,SAAS,KAErBG,EAAG3B,EAAM+B,GACTJ,EAAG,MAAO,CAAEH,SAAS,QAIzBG,EAAG,MAAO,CAAEH,SAAS,M,+BAInBvB,KAAKpC,OACPoC,KAAKpC,MAAM6H,a,GA5BgBmB,GCHf,SAAC,GAAD,IAAGP,EAAH,EAAGA,MAAH,OAChB,uBAAKG,QAAQ,YAAYF,MAAM,MAC7B,yBACE,wBACEI,EAAE,uYACF/C,KAAM0C,IAER,wBACEK,EAAE,ucACF/C,KAAM0C,SCJDpH,EAAa,KAIbC,EAAc,GAiBrB8H,EAA4B,SAAC,GAAiC,IAA/BC,EAA8B,EAA9BA,SAAUC,EAAoB,EAApBA,SACvCC,EAAON,EAAUI,EAASlH,MAAM,GACtC,OACE,uBACEqH,MAAO,CACLd,MAAOrH,EACPsH,OAzBmB,IA0BnBc,gBAAiBH,EAAW,UAAY,UACxCI,QAAS,OACTC,eAAgB,SAChBC,OAAQ,kBACRC,WAAY,SACZC,OAAQ,OACRC,OAAQ,KAGV,gBAACR,EAAD,CAAMd,MAAOY,EAASZ,UAgFtBuB,EAAYC,aA3Ea,SAACC,GAAqB,IAEjDC,EAWED,EAXFC,OACA9J,EAUE6J,EAVF7J,EACAE,EASE2J,EATF3J,EACA+I,EAQEY,EARFZ,SACAD,EAOEa,EAPFb,SACAe,EAMEF,EANFE,YACAC,EAKEH,EALFG,IACAC,EAIEJ,EAJFI,OACAC,EAGEL,EAHFK,UACAhJ,EAEE2I,EAFF3I,YACAiJ,EACEN,EADFM,SAGIzJ,EAAI,gBAAC,EAAD,CAAYsI,SAAUA,EAAUC,SAAUA,IAC9CmB,OAAiCxK,IAAnBoJ,EAASrJ,QAAwBqJ,EAAS7I,UACxDkK,EACJ,uBACElB,MAAO,CACL/C,SAAU,WACVkE,KAAMtK,EACNuK,IAAKrK,EACLsK,QAASN,EAAY,GAAM,EAC3BO,WAAY,iCACZC,UAAU,UAAD,OAAYN,EAAcpB,EAASvH,MAAQ,EAA3C,QACTkJ,UAAW,aACXC,YAAa,OACblB,OAAQQ,EAAY,IAAO,IAE7BW,eAAc7B,EAAStJ,WACvBoL,IAAKhB,GAEJpJ,GAGL,IAAKsI,EAASrJ,MACZ,OAAO0K,EAET,IAAM1K,EACJ,gBAAC,EAAD,CACEqJ,SACEkB,EACIpK,EACEkJ,EAASrJ,MACTqJ,EAAS5I,OAAOJ,EAAIgB,EAAa,EACjCA,EAAa,EACbgI,EAAS5I,OAAOF,GAElB8I,EAASrJ,MAEfwK,SAAUA,EACVJ,YAAaA,EACbgB,OAAQf,EACRC,OAAQA,EACR/I,YAAaA,IAGjB,OACE,gCACGmJ,EACA1K,MAgBDkC,EAA6B,SAAC,GAOjB,IANjBmH,EAMgB,EANhBA,SACAe,EAKgB,EALhBA,YACAgB,EAIgB,EAJhBA,OACAd,EAGgB,EAHhBA,OACA/I,EAEgB,EAFhBA,YACAiJ,EACgB,EADhBA,SACgB,EACgBa,YAAe,GAD/B,mBACT/B,EADS,KACCgC,EADD,OAGkBD,YAAe,GAHjC,mBAGTd,EAHS,KAGEgB,EAHF,KAIVC,OAA4BvL,IAAnBoJ,EAASrJ,QAAwBqJ,EAAS7I,UAGnDiL,EAAWJ,WACf,iBAAO,CACLK,YAAa,kBAAMJ,GAAY,IAC/BK,YAAa,kBAAML,GAAY,IAC/BM,OAAQ,YAA6B,IAA1BC,EAAyB,EAAzBA,cACTT,EAAO/B,EAAStJ,WAAY8L,EAAcC,QAAQC,QAClDT,GAAY,IAEdU,QAAS,GACTC,OAAQ,YAAyC,EAAtCR,SAAuC,IAA7BS,EAA4B,EAA5BA,iBACnB,QAAIA,EAAiBJ,QAAQC,SAEzBxK,EACEiJ,EACAnB,EAAStJ,WACTmM,EAAiBJ,QAAQC,SACtB1C,EAAStJ,aAAemM,EAAiBJ,QAAQC,YAK9D,CAACvB,EAAUnB,EAAStJ,WAAYwB,EAAa6J,IAGzCrK,EACJ,gBAACiJ,EAAD,eACEmC,UACE,CACEC,SAAS,EACTC,MAAO,kBAAM/B,EAAOjB,EAAStJ,aAC7BuM,OAAQ,gBAAGC,EAAH,EAAGA,GAAIjM,EAAP,EAAOA,GAAP,OAAqB8J,EAAYmC,EAAIjM,EAAI+I,EAAStJ,aAC1DyM,UAAW,CACTC,IAASD,UAAUE,aAAa,CAC9BC,YAAaC,SAASC,SAK9BpB,SAAUA,EACVnC,SAAUA,EACVwD,OAAQ,WACNvB,GAAa,IAEfwB,KAAM,WACJxB,GAAa,IAEfhB,UAAWA,EACXlB,SAAUA,EACVe,YAAaA,EACbE,OAAQA,EACRD,IAAKe,EACLZ,SAAUA,EACVjJ,YAAaA,GACT8H,EAAS5I,SAGjB,OACE,gCACE,uBACE+I,MAAO,CACLE,QAAS8B,IAAWjB,EAAY,UAAY,OAC5C9D,SAAU,WACViC,MAAOzG,EAAMoH,IAAahI,EAAaC,GAAeA,EACtDqH,OAAQqE,IACRrC,KAAMtB,EAAS5I,OAAOJ,EAAIiB,EAC1BsJ,IAAKvB,EAAS5I,OAAOF,EAAIe,EACzBmI,gBAAiB,MACjBwD,aAAc,OACdlD,OAAQ,MAGXhJ,I,iBC3McmM,EAWnB,WAAYxK,GAAQ,IAAD,gCAVZyK,WAUY,OATZC,qBASY,OARZC,YAQY,OAPZ3K,OAOY,OANZ4K,YAMY,OALZ9J,aAAc,EAKF,KAJZjB,YAAc,EAIF,KAFZgL,OAAkB,GAEN,KASZC,cAAgB,WACrB,EAAK9K,EAAE+K,aAAa,EAAK/K,EAAEgL,YAAa,EAAKhL,EAAEiL,aAAe,IAV7C,KAYZvC,OAAS,SAACtL,GACf,IAAM8N,EAAc,EAAKC,UAAU/N,GAC/B8N,aAAuBtL,EACzB,EAAKwL,SAASF,GAEdA,EAAY/J,WAAU,SAAC1B,EAAM+B,GACd,YAAT/B,IACF,EAAKqB,aAAe,EAAKA,iBAnBd,KAyBZqK,UAAY,SAAC/N,GAElB,OAAO,IAAImJ,EAAUnJ,EAAKqC,MAAM,GAC9B,EAAKO,EACL,EAAK4K,OAAOnK,MACZrD,EAAKW,OAAOJ,EACZP,EAAKW,OAAOF,EACZT,EAAKE,MAAQ,EAAK6N,UAAU/N,EAAKE,YAASC,IAhC3B,KAmCZ6N,SAAW,SAACC,GACjBA,EAAMvL,QACNuL,EAAMlK,WAAU,SAAC1B,EAAM+B,GACrB,EAAKqJ,OAAOjI,KAAKpB,OAtCF,KAyCZ1B,MAAQ,WACb,EAAK6K,OAAS,EAAK3K,EAAEsL,aACnB,EAAKtL,EAAEgL,YACP,EAAKhL,EAAEiL,aAAe,GAExB,EAAKR,MAAQrK,IAAOmL,MAAMjL,OAAO,EAAKqK,OAAOa,KAC7C,IAAMC,EAAc,CAClBhB,MAAO,EAAKA,MACZiB,WAAY,CACV/I,UAAW,GACXgJ,iBAAkB,MAGtB,EAAKjB,gBAAkBtK,IAAOwL,gBAAgBtL,OAC5C,EAAKsK,OACLa,GAEF,EAAKb,OAAOnK,MAAMoL,QAAQhO,EAAI,EAE9B,EAAKgN,OAAOtH,SAAQ,SAAAuI,GAAC,OAAIA,EAAEhM,WAE3B,EAAKD,YAAc,EAAKG,EAAEC,SAC1B,EAAKyK,gBAAgBD,MAAMsB,WAAa,EAAK/L,EAAEgM,eAC/C5L,IAAOkB,MAAMC,IAAI,EAAKqJ,OAAOnK,MAAO,EAAKiK,iBACzC,IAAMuB,EAAQ,CACZ7L,IAAOoF,OAAOC,UACZ,EACA,EAAKzF,EAAEiL,aAAe,EAAI,GAC1B,EAAKjL,EAAEgL,YACP,GACA,CAAEkB,UAAU,IAEd9L,IAAOoF,OAAOC,UAAU,GAAI,GAAI,EAAKzF,EAAEgL,YAAa,GAAI,CACtDkB,UAAU,IAEZ9L,IAAOoF,OAAOC,WAAW,GAAI,EAAG,GAAI,EAAKzF,EAAEiL,aAAe,EAAG,CAC3DiB,UAAU,IAEZ9L,IAAOoF,OAAOC,UACZ,EAAKzF,EAAEgL,YAAc,GACrB,EACA,GACA,EAAKhL,EAAEiL,aAAe,EACtB,CACEiB,UAAU,KAIhB9L,IAAOkB,MAAMC,IAAI,EAAKqJ,OAAOnK,MAAOwL,GACpC7L,IAAO+L,OAAOC,IAAI,EAAKxB,SA1FN,KA4FZnG,KAAO,WAER,EAAK3D,aACP,EAAKd,EAAEoE,UAAU,EAAKpE,EAAEqE,IAAK,KAC7B,EAAKrE,EAAEqM,YAAY,EAAKrM,EAAEC,SAAW,EAAKJ,aAAe,IAAM,IAAK,MAEpE,EAAKG,EAAEqM,WAAW,WAEpB,EAAKxB,OAAOtH,SAAQ,SAAAuI,GAClBA,EAAErH,WApGJ/E,KAAKM,EAAIA,EACTN,KAAKM,EAAED,MAAQL,KAAKI,MACpBJ,KAAKM,EAAE8K,cAAgBpL,KAAKoL,cAC5BpL,KAAKM,EAAEyE,KAAO/E,KAAK+E,KACnB/E,KAAKkL,OAASxK,IAAO+L,OAAO7L,U,8NChBhC,IAAMgM,EAAO,SAAC,GAA6B,IAA3B7E,EAA0B,EAA1BA,OAAQ8E,EAAkB,EAAlBA,OAAkB,EACpB5D,WAAoB,MADA,mBACjC6D,EADiC,KAC7BC,EAD6B,KAExC9D,sBAA0B4D,GAAQ,iBAAO,CACvC7D,OADuC,SAChCtL,GACLoP,EAAG9D,O,yVAAH,IACKtL,EADL,CAEEW,OAAQ,CACNJ,EAAGP,EAAKW,OAAOJ,EAAIgB,EAAa,EAChCd,EAAGT,EAAKW,OAAOF,EAAIyM,cAK3B,IAAM7B,EAAME,eAAkB,SAAC+D,GAC7B,GAAa,OAATA,EAAe,CAMjB,IAAIC,KALW,SAAC3M,GACd,IAAM4M,EAAI,IAAIpC,EAAIxK,GAElB,OADAyM,EAAMG,GACCA,IAEMF,MAEhB,IAEH,OACE,uBAAKjE,IAAKhB,GACR,uBAAKgB,IAAKA,MAMVnB,EAAYqB,cAAiB,SAACnB,EAAYiB,GAC9C,IAAMoE,EAAgBlE,WACpB,kBAAM,SAACmE,GAAD,OAAa,gBAAC,EAAD,eAAMrE,IAAKA,GAASqE,OACvC,CAACrE,IAEGsE,EAAKpE,WAAc,kBAAMpB,YAAUsF,KAAM,CAACA,IAChD,OAAO,gBAACE,EAAOvF,MAiCFwF,EA1BkB,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,QAC5BxE,EAAME,WACZ,OACE,gBAAC,EAAD,CACEI,SACE,CACEQ,OAAQ,YAAoC,EAAjCR,SACT,QAD0C,EAAvBS,iBACEJ,QAAQC,QAI/BH,OAAQ,YAAwB,IAArBC,EAAoB,EAApBA,cACT8D,EAAQ9D,EAAcC,QAAQC,QAAQ,SAAChL,GACjCoK,GAAOA,EAAIyE,SACbzE,EAAIyE,QAAQxE,OAAOrK,OAIzBiL,QAAS,IAGbiD,OAAQ9D,K,6jBC1Dd,IAAM0E,GAAa,SAAC1N,EAAc9B,EAAWE,GAA1B,MAA4C,CAC7D4B,OACApC,WAAYsC,IAAO,SAEnBoG,MAAO,UACPjI,WAAW,EACXC,OAAQ,CAAEJ,IAAGE,KACbuP,YAAY,EACZhO,MAAO,IAOHiO,GAAe,SAACxD,EAAYjM,EAAYT,EAAYc,GAArC,OACnBA,EAAMG,KAAI,SAAChB,GAAD,OhBda,SAAZkQ,EAAazD,EAAYjM,EAAYT,EAAYC,GAArC,OACvBA,EAAKC,aAAeF,EAApB,KAESC,EAFT,CAGMW,OAAQ,CAAEJ,EAAGP,EAAKW,OAAOJ,EAAIC,EAAIC,EAAGT,EAAKW,OAAOF,EAAIgM,GACpDuD,YAAY,EACZ9P,MAAOF,EAAKE,MACRgQ,EAAUzD,EAAIjM,EAAIR,EAAKE,MAAMD,WAAYD,EAAKE,OAC9CF,EAAKE,QAEXF,EAAKE,MAAL,KACKF,EADL,CACWE,MAAOgQ,EAAUzD,EAAIjM,EAAIT,EAAIC,EAAKE,SAC7CF,EgBEmBkQ,CAAUzD,EAAIjM,EAAIT,EAAIC,OA4EhCmQ,GArEO,WACpB,IANgBC,EAMVC,GANUD,EAMU1K,OAAO4K,YH/BR,IG+BoC9O,EAL7D+O,OAAOC,KAAKrH,GAAWnI,KAAI,SAACqB,EAAcoO,GAAf,OACzBV,GAAW1N,GAAOd,EAAaC,GAAeiP,EAAQjP,EAAa4O,OAG3C,EAEAM,mBAAiB,CACzC7P,MAAOwP,IAHiB,mBAEnBM,EAFmB,KAEZC,EAFY,KAM1B,OACE,yBAAKlH,MAAO,CAAEd,MAAO,OAAQC,OAAQ,SACnC,kBAAC,EAAD,CACEgH,QAAS,SAAC9P,EAAYiE,GACpB4M,GAAS,SAAAC,GAAc,IAAD,EhBSN,SAAC9Q,EAAYc,GACrC,IAAMiQ,EAAQjQ,EACXG,KAAI,SAAChB,GAAD,OAAaF,EAASC,EAAIC,MAC9BkB,MAAK,SAACD,GAAD,YAA4Bd,IAANc,KAC9B,YAAcd,IAAV2Q,GACF3P,QAAQC,MAAR,2BAAkCrB,IAC3B,CAACc,EAAM,GAAIA,IAKb,CAACiQ,EAHQjQ,EACbG,KAAI,SAAChB,GAAD,OAAaI,EAAWL,EAAIC,MAChCqB,QAAO,SAACJ,GAAD,YAA4Bd,IAANc,MgBlBG8P,CAAWhR,EAAI8Q,EAAUhQ,OAD9B,mBACbiQ,EADa,KACNE,EADM,KAGpB,OADAhN,EAAG8M,GACI,MACFD,EADL,CAEEhQ,MAAOmQ,UAKdL,EAAM9P,MAAMG,KAAI,SAAChB,GAAD,OACf,kBAAC,EAAD,CACEiR,IAAKjR,EAAKC,WACVsJ,SAAUvJ,EACV0K,SAAUiG,EAAM9P,MAChByK,OAAQ,SAAC4F,EAAkBnQ,GAAnB,OACN6P,GAAS,SAAAC,GAAS,aACbA,EADa,CAEhBhQ,MAAOD,EAAMiQ,EAAUhQ,MAAOqQ,EAAUnQ,SAG5CyJ,OAAQ,SAACzK,GAAD,OACN6Q,GAAS,SAAAC,GAAS,aACbA,EADa,CAEhBhQ,MAAOiB,EAAK+O,EAAUhQ,MAAOd,SAGjCuK,YAAa,SAACmC,EAAIjM,EAAIT,GACpB6Q,GAAS,SAAAC,GACP,IAAM5P,EhBhCS,SAAClB,EAAYc,GACxC,IAAMiQ,EAAQjQ,EACXG,KAAI,SAAChB,GAAD,OAAaF,EAASC,EAAIC,MAC9BkB,MAAK,SAACD,GAAD,YAA4Bd,IAANc,KAC9B,QAAcd,IAAV2Q,EAKJ,OAAOA,EAJL3P,QAAQC,MAAR,2BAAkCrB,IgB2BdoR,CAAcpR,EAAI8Q,EAAUhQ,OAOtC,OAAO,MACFgQ,EADL,CAEEhQ,MAReI,EAAE+O,WAAF,sBAERC,GAAaxD,EAAIjM,EAAIT,EAAI8Q,EAAUhQ,QAF3B,CAGXkP,GAAW9O,EAAEoB,KAAMpB,EAAEN,OAAOJ,EAAGU,EAAEN,OAAOF,KAE1CwP,GAAaxD,EAAIjM,EAAIT,EAAI8Q,EAAUhQ,aAO3CY,YAAaA,OAGjB,yBACEiI,MAAO,CACL0H,OAAQ,EACRzK,SAAU,QACViC,MAAO,OACPe,gBAAiB,wBACjBM,OAAQ,EACRpB,OH5FiB,IG4FmB,EAAdrH,OCxFZ6P,QACW,cAA7B3L,OAAO4L,SAASC,UAEe,UAA7B7L,OAAO4L,SAASC,UAEhB7L,OAAO4L,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO,kBAAC,GAAD,MAAS5E,SAAS6E,eAAe,SDmI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.51872632.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/turtle.c5498b74.svg\";","import { CARD_WIDTH, GUTTER_SIZE } from \"./Card\";\n\nexport interface ICoords {\n  x: number;\n  y: number;\n}\nexport interface C {\n  name: string;\n  instanceid: string;\n  color: string;\n  child?: C;\n  hasParent: boolean;\n  coords: ICoords;\n  isTemplate: boolean;\n  angle: number;\n}\n\nexport const setCoords = (dy: number, dx: number, id: string, card: C): C =>\n  card.instanceid === id\n    ? {\n        ...card,\n        coords: { x: card.coords.x + dx, y: card.coords.y + dy },\n        isTemplate: false,\n        child: card.child\n          ? setCoords(dy, dx, card.child.instanceid, card.child)\n          : card.child\n      }\n    : card.child\n    ? { ...card, child: setCoords(dy, dx, id, card.child) }\n    : card;\n\nexport const findByID = (id: string, card: C): C | undefined =>\n  card.instanceid === id\n    ? card\n    : card.child\n    ? findByID(id, card.child)\n    : undefined;\n\nexport const deleteByID = (id: string, card: C): C | undefined =>\n  card.instanceid === id\n    ? undefined\n    : card.child\n    ? { ...card, child: deleteByID(id, card.child) }\n    : card;\n\nexport const findInAllByID = (id: string, cards: C[]): C => {\n  const found = cards\n    .map((card: C) => findByID(id, card))\n    .find((c: C | undefined) => c !== undefined);\n  if (found === undefined) {\n    console.error(`Cannot find card ${id}`);\n    //@ts-ignore\n    return;\n  }\n  return found;\n};\n\nexport const dropDelete = (id: string, cards: C[]): [C, C[]] => {\n  const found = cards\n    .map((card: C) => findByID(id, card))\n    .find((c: C | undefined) => c !== undefined);\n  if (found === undefined) {\n    console.error(`Cannot find card ${id}`);\n    return [cards[0], cards];\n  }\n  const deleted = cards\n    .map((card: C) => deleteByID(id, card))\n    .filter((c: C | undefined) => c !== undefined);\n  return [found, deleted as C[]];\n};\n\nexport const shiftLeafX = (leaf: C, x: number, dx: number, y: number): C => ({\n  ...leaf,\n  hasParent: true,\n  coords: { y, x },\n  child: leaf.child ? shiftLeafX(leaf.child, x + dx, dx, y) : undefined\n});\n\nexport const insertLeaf = (card: C, leaf: C): C =>\n  card.child === undefined\n    ? {\n        ...card,\n        child: shiftLeafX(\n          leaf,\n          card.coords.x + CARD_WIDTH + GUTTER_SIZE,\n          CARD_WIDTH + GUTTER_SIZE,\n          card.coords.y\n        )\n      }\n    : { ...card, child: insertLeaf(card.child, leaf) };\n\nexport const putIn = (cards: C[], sourceID: string, childID: string): C[] => {\n  const leaf = cards\n    .map((c: C) => findByID(childID, c))\n    .find((c: C | undefined) => c !== undefined);\n  if (leaf === undefined) {\n    console.error(`ASSERT: cannot find child by ID ${childID}`);\n    return cards;\n  }\n  return (cards\n    .map((card: C) => deleteByID(childID, card))\n    .filter((card: C | undefined) => card !== undefined) as C[]).map(\n    (card: C) => {\n      if (findByID(sourceID, card) !== undefined) {\n        return insertLeaf(card, leaf);\n      } else {\n        return card;\n      }\n    }\n  );\n};\n\nexport const isUnrelated = (cards: C[], id1: string, id2: string): boolean => {\n  const head1 = cards\n    .map((c: C) => findByID(id1, c))\n    .find((c: C | undefined) => c !== undefined);\n  const head2 = cards\n    .map((c: C) => findByID(id2, c))\n    .find((c: C | undefined) => c !== undefined);\n\n  if (head1 === undefined || head2 === undefined) {\n    return true;\n  }\n\n  return (\n    findByID(id1, head2) === undefined && findByID(id2, head1) === undefined\n  );\n};\n\nexport const lift = (cards: C[], id: string): C[] => {\n  const leaf = cards\n    .map((c: C) => findByID(id, c))\n    .find((c: C | undefined) => c !== undefined);\n\n  if (leaf === undefined) {\n    console.error(`ASSERT: cannot find ID ${id}`);\n    return cards;\n  }\n  const removed = cards\n    .map((card: C) => deleteByID(id, card))\n    .filter((card: C | undefined) => card !== undefined) as C[];\n  return [\n    ...removed,\n    { ...leaf, hasParent: false, angle: Math.random() * 16 - 8 }\n  ];\n};\n\nexport const depth = (card: C): number =>\n  card.child ? depth(card.child) + 1 : 1;\n","import uniqid from \"uniqid\";\n\nexport default abstract class Card {\n  public name: string;\n  public id: string;\n  public child?: Card;\n\n  constructor(name: string) {\n    this.name = name;\n    this.id = uniqid(name);\n  }\n  public abstract cancel(): void;\n  public abstract getEffect(cb: (name: string, payload: any) => void): void;\n}\n","import Matter from \"matter-js\";\nimport Card from \"./CardClass\";\nimport p5 from \"p5\";\n\nexport default abstract class Thing extends Card {\n  constructor(name: string) {\n    super(name);\n    this.composite = Matter.Composite.create({ label: this.id });\n  }\n  protected startMillis = -1;\n\n  public Setup = () => {\n    this.setup();\n    this.startMillis = this.p.millis();\n  };\n  public abstract setup(): any;\n\n  public abstract draw(): any;\n\n  public abstract p: p5;\n  public drawableChildren: Thing[] = [];\n\n  public composite: Matter.Composite;\n}\n","import * as p5 from \"p5\";\nimport Matter from \"matter-js\";\nimport Thing from \"../ThingCard\";\nimport Card from \"../CardClass\";\nimport turtle from \"./turtle.svg\";\n\nexport default class Turtle extends Thing {\n  public p: p5;\n  public world: Matter.World;\n  public x: number;\n  public y: number;\n  public img: p5.Image;\n  public motionInterval: number;\n  public rotationInterval: number;\n  public moving = false;\n  public rainbowMode = false;\n  public penMode: { enable: boolean; rainbow: boolean; penHistory: any[] } = {\n    enable: false,\n    rainbow: false,\n    penHistory: []\n  };\n\n  public getEffect = (cb: (name: string, payload: any) => void) => {\n    const nb = new Turtle(this.p, this.world, this.x, this.y, this.child);\n    nb.Setup();\n    Matter.World.add(this.world, nb.composite);\n    if (nb.child) {\n      nb.child.getEffect((name: string, payload: any) => {\n        if (name === \"oscillate\") {\n          Matter.Body.applyForce(\n            nb.composite.bodies[0],\n            { x: 0, y: 0 },\n            {\n              x: 0,\n              y: 0.01 * payload\n            }\n          );\n        }\n        if (name === \"rainbow\") {\n          nb.rainbowMode = true;\n        }\n        if (name === \"pen\") {\n          nb.penMode = {\n            ...nb.penMode,\n            enable: true,\n            rainbow: payload.rainbow\n          };\n        }\n        if (name === \"big\") {\n          //   Matter.Body.scale(\n          //     nb.composite.bodies[0],\n          //     payload / nb.radius,\n          //     payload / nb.radius\n          //   );\n          //   nb.radius = payload;\n        }\n        if (payload instanceof Thing) {\n          const bodyA = Matter.Composite.allBodies(nb.composite)[0];\n          const bodyB = Matter.Composite.allBodies(payload.composite)[0];\n          Matter.Composite.add(nb.composite, payload.composite);\n          const bodyAHeight = bodyA.bounds.max.y - bodyA.bounds.min.y,\n            bodyAWidth = bodyA.bounds.max.x - bodyA.bounds.min.x,\n            bodyBHeight = bodyB.bounds.max.y - bodyB.bounds.min.y,\n            bodyBWidth = bodyB.bounds.max.x - bodyB.bounds.min.x;\n          Matter.Composite.add(\n            nb.composite,\n            Matter.Constraint.create({\n              bodyA,\n              bodyB,\n              pointA: { x: bodyAWidth * 1, y: bodyAHeight * 0 },\n              pointB: {\n                x: bodyBWidth * -0.8,\n                y: bodyBHeight * 0\n              },\n              length: 8,\n              damping: 0.1,\n              stiffness: 0.1\n            })\n          );\n          nb.drawableChildren.push(payload);\n        }\n      });\n    }\n    cb(this.name, nb);\n  };\n\n  constructor(\n    p: p5,\n    world: Matter.World,\n\n    x: number = 0,\n    y: number = 0,\n    child?: Card\n  ) {\n    super(\"turtle\");\n    this.child = child;\n    this.x = x;\n    this.y = y;\n    this.world = world;\n    this.p = p;\n    this.img = this.p.loadImage(turtle);\n\n    Matter.Composite.add(this.composite, Matter.Bodies.rectangle(x, y, 48, 50));\n    this.setMotionInterval();\n    this.setRotationInterval();\n  }\n  public setMotionInterval = () => {\n    this.motionInterval = window.setInterval(() => {\n      this.moving = !this.moving;\n    }, this.p.randomGaussian(700, 100));\n  };\n  public setRotationInterval = () => {\n    this.rotationInterval = window.setInterval(() => {\n      Matter.Body.setAngularVelocity(\n        this.composite.bodies[0],\n        this.p.randomGaussian(0, 0.1)\n      );\n    }, this.p.randomGaussian(5000, 1000));\n  };\n\n  public setup = () => {};\n  public debugBounds = () => {\n    this.p.push();\n    const { vertices } = this.composite.bodies[0];\n    this.p.fill(255, 255, 255, 0.5);\n    this.p.beginShape();\n    vertices.forEach(vert => {\n      this.p.vertex(vert.x, vert.y);\n    });\n    this.p.endShape(this.p.CLOSE);\n    this.p.pop();\n  };\n  public handlePen = () => {\n    if (this.p.frameCount % 10 === 0) {\n      const { x, y } = this.composite.bodies[0].position;\n      this.penMode.penHistory.push({\n        x,\n        y: y + 25\n      });\n    }\n    if (this.penMode.enable && this.penMode.penHistory.length > 0) {\n      this.penMode.penHistory.reduce((acc, cur, ind) => {\n        this.p.push();\n        this.p.colorMode(this.p.HSB, 1000);\n        this.p.stroke(\"white\");\n        if (this.penMode.rainbow) {\n          this.p.stroke(\n            (this.p.millis() - this.startMillis + ind * 200) % 1000,\n            500,\n            1000\n          );\n        }\n        this.p.strokeWeight(5);\n        this.p.line(acc.x, acc.y, cur.x, cur.y);\n        this.p.pop();\n        return cur;\n      });\n    }\n  };\n  public draw = () => {\n    // this.debugBounds();\n    const F = Matter.Vector.rotate(\n      Matter.Vector.create(0, -1),\n      this.composite.bodies[0].angle\n    );\n    Matter.Body.setVelocity(this.composite.bodies[0], F);\n\n    this.handlePen();\n    this.p.push();\n    this.p.angleMode(this.p.RADIANS);\n    this.p.translate(\n      this.composite.bodies[0].vertices[0].x,\n      this.composite.bodies[0].vertices[0].y\n    );\n    this.p.rotate(this.composite.bodies[0].angle);\n    if (this.rainbowMode) {\n      this.p.colorMode(this.p.HSB, 1000);\n      this.p.tint((this.p.millis() - this.startMillis) % 1000, 500, 1000);\n    }\n    this.p.image(this.img, 0, 0);\n    this.p.pop();\n    this.drawableChildren.forEach(child => {\n      child.draw();\n    });\n  };\n  public cancel = () => {\n    window.clearInterval(this.motionInterval);\n    window.clearInterval(this.rotationInterval);\n    Matter.World.remove(this.world, this.composite.bodies[0]);\n    if (this.child) {\n      this.child.cancel();\n    }\n  };\n}\n","import * as p5 from \"p5\";\nimport Matter from \"matter-js\";\nimport Thing from \"../ThingCard\";\nimport Card from \"../CardClass\";\n\nexport default class Ball extends Thing {\n  public p: p5;\n  public world: Matter.World;\n  public radius: number;\n  public x: number;\n  public y: number;\n  public getEffect = (cb: (name: string, payload: any) => void) => {\n    const nb = new Ball(this.p, this.world, this.x, this.y, this.child);\n    nb.Setup();\n    Matter.World.add(this.world, nb.composite);\n    if (nb.child) {\n      nb.child.getEffect((name: string, payload: any) => {\n        if (name === \"oscillate\") {\n          Matter.Body.applyForce(\n            nb.composite.bodies[0],\n            { x: 0, y: 0 },\n            {\n              x: 0,\n              y: 0.01 * payload\n            }\n          );\n        }\n        if (name === \"big\") {\n          Matter.Body.scale(\n            nb.composite.bodies[0],\n            payload / nb.radius,\n            payload / nb.radius\n          );\n          nb.radius = payload;\n        }\n        if (payload instanceof Thing) {\n          const bodyA = Matter.Composite.allBodies(nb.composite)[0];\n          const bodyB = Matter.Composite.allBodies(payload.composite)[0];\n          Matter.Composite.add(nb.composite, payload.composite);\n          const bodyAHeight = bodyA.bounds.max.y - bodyA.bounds.min.y,\n            bodyAWidth = bodyA.bounds.max.x - bodyA.bounds.min.x,\n            bodyBHeight = bodyB.bounds.max.y - bodyB.bounds.min.y,\n            bodyBWidth = bodyB.bounds.max.x - bodyB.bounds.min.x;\n          Matter.Composite.add(\n            nb.composite,\n            Matter.Constraint.create({\n              bodyA,\n              bodyB,\n              pointA: { x: bodyAWidth * 1, y: bodyAHeight * 0 },\n              pointB: {\n                x: bodyBWidth * -0.8,\n                y: bodyBHeight * 0\n              },\n              length: 8,\n              damping: 0.1,\n              stiffness: 0.1\n            })\n          );\n          nb.drawableChildren.push(payload);\n        }\n      });\n    }\n    cb(this.name, nb);\n  };\n\n  constructor(\n    p: p5,\n    world: Matter.World,\n\n    x: number = 0,\n    y: number = 0,\n    child?: Card\n  ) {\n    super(\"ball\");\n    const radius = 50;\n    this.child = child;\n    this.x = x;\n    this.y = y;\n    this.world = world;\n\n    Matter.Composite.add(\n      this.composite,\n      Matter.Bodies.circle(x, y, radius / 2)\n    );\n    this.radius = radius;\n    this.p = p;\n  }\n  public setup() {}\n  public draw = () => {\n    this.p.circle(\n      this.composite.bodies[0].position.x,\n      this.composite.bodies[0].position.y,\n      this.radius\n    );\n    this.drawableChildren.forEach(child => {\n      child.draw();\n    });\n  };\n  public cancel = () => {\n    if (this.child) {\n      this.child.cancel();\n    }\n  };\n}\n","import * as React from \"react\";\n\nconst Duck = ({ color }: { color: string }) => (\n  <svg\n    width=\"50\"\n    height=\"50\"\n    viewBox=\"0 0 109 109\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M107.061 24.537H96.5793L96.3664 23.5823C94.9792 17.3515 91.7094 11.816 86.9093 7.5647C81.3973 2.68792 74.3055 0 66.9441 0C58.8909 0 51.3198 3.14034 45.625 8.83212C39.9301 14.5307 36.7934 22.102 36.7934 30.1526C36.7934 34.9097 37.9311 39.6468 40.08 43.8483C41.4472 46.5196 43.207 48.9746 45.3159 51.1437L46.5998 52.4709L44.8801 53.1328C41.9462 54.2572 38.7826 54.8295 35.4862 54.8295C29.4056 54.8295 23.724 52.8535 19.4828 49.2639L3.26639 33.153C2.92044 32.8237 2.44144 32.6274 1.93923 32.6274C0.871365 32.6274 0 33.499 0 34.5701L0.0131993 79.6326C0.226091 87.5567 3.45608 94.9317 9.1043 100.441C14.7659 105.96 22.2403 109 30.1505 109H71.8541C79.9073 109 87.475 105.866 93.1664 100.174C98.8578 94.4859 101.995 86.9178 101.995 78.8608C101.995 68.6048 96.8522 59.1472 88.2467 53.5618L86.9694 52.7334L88.0538 51.6689C90.1063 49.6595 91.8559 47.3642 93.2631 44.856L93.5424 44.3503L94.1146 44.2505C98.0165 43.5585 101.503 41.6556 104.197 38.7416C107.293 35.3951 109 31.0404 109 26.4798C109 25.4052 108.128 24.537 107.061 24.537ZM104.689 29.9361C103.192 35.8209 98.1459 40.1056 92.1318 40.6045L91.0341 40.6909L90.5485 41.6856C88.7355 45.3882 86.0411 48.6516 82.7247 51.1533V51.1633L82.2157 51.5358C81.7101 51.9018 81.4042 52.4873 81.4042 53.1094C81.4042 53.9244 81.9198 54.6564 82.6849 54.9357C92.0954 59.2338 98.1161 68.6114 98.1161 78.8608C98.1161 93.3449 86.3339 105.121 71.8541 105.121H30.1503C15.83 105.121 4.29402 93.9206 3.89485 79.616L3.87824 39.2274L16.8514 52.1147C21.8244 56.3728 28.4374 58.7148 35.486 58.7148C41.0578 58.7148 46.3835 57.2444 50.884 54.4733C51.5759 54.0973 51.9685 53.4388 51.9685 52.7268C51.9685 52.1081 51.6792 51.5358 51.1768 51.1633C44.4973 46.1468 40.6718 38.4854 40.6718 30.1522C40.6718 15.6647 52.4573 3.87848 66.9439 3.87848C80.0934 3.87848 91.2934 13.6987 92.9899 26.7257L93.2094 28.4189H105.075L104.689 29.9361Z\"\n      fill={color}\n    />\n  </svg>\n);\n\nexport default Duck;\n","import * as React from \"react\";\n\nconst TurtleIcon: React.FC = ({ color }: any) => (\n  <svg width=\"48\" height=\"60\">\n    <g>\n      <g>\n        <path\n          d=\"M38,16.9199219c0-0.8457031-0.3291016-1.6411133-0.9277344-2.2392578    c-1.2333984-1.2333984-3.2431641-1.234375-4.4785156,0l-1.1982422,1.1982422    c-0.6259766-0.3295898-1.3134766-0.609375-2.0615234-0.8349609V11c0-2.9404297-2.3925781-5.3330078-5.3339844-5.3330078    c-2.9404297,0-5.3330078,2.3925781-5.3330078,5.3330078v4.043457c-0.7490234,0.2255859-1.4360352,0.5053711-2.0620117,0.8354492    l-1.1982422-1.1982422c-1.234375-1.2353516-3.2441406-1.2353516-4.4785156,0    c-1.2348633,1.2348633-1.2348633,3.2436523,0,4.4785156l1.605957,1.6064453    c-0.2363281,0.8276367-0.3676758,1.722168-0.3676758,2.6923828c0,2.2333984,0.6176758,4.6181641,1.675293,6.8027344    l-1.4995117,1.4990234c-1.2348633,1.234375-1.2348633,3.2441406,0,4.4785156    c0.6171875,0.6171875,1.4282227,0.9257812,2.2392578,0.9257812s1.6220703-0.3085938,2.2392578-0.9257812l0.8525391-0.8525391    C19.2373047,36.75,21.0478516,37.6835938,23,37.9248047v1.2421875c0,1.7460938,1.4208984,3.1669922,3.1669922,3.1669922    c0.5527344,0,1-0.4472656,1-1s-0.4472656-1-1-1C25.5234375,40.3339844,25,39.8105469,25,39.1669922v-1.2421875    c1.9521484-0.2421875,3.7626953-1.1748047,5.3271484-2.5390625l0.8525391,0.8525391    c0.6171875,0.6171875,1.4287109,0.9257812,2.2392578,0.9257812s1.6220703-0.3085938,2.2392578-0.9257812    c1.234375-1.234375,1.234375-3.2441406,0-4.4785156l-1.5-1.5c1.0566406-2.1845703,1.6748047-4.5693359,1.6748047-6.8017578    c0-0.9697266-0.1308594-1.8642578-0.3671875-2.6914062l1.6064453-1.6069336C37.6708984,18.5615234,38,17.7661133,38,16.9199219z     M33.8330078,23.4580078c0,2.1318359-0.6484375,4.4404297-1.7382812,6.4902344    c-0.03125,0.0527344-0.0693359,0.1005859-0.0908203,0.1572266c-0.6464844,1.1816406-1.4394531,2.2675781-2.3417969,3.1796875    c-0.0039062,0.0039062-0.0087891,0.0048828-0.0126953,0.0087891c-0.0048828,0.0048828-0.0058594,0.0117188-0.0107422,0.0166016    C28.0244141,34.9345703,26.0732422,36,24,36c-2.0703125,0-4.0200195-1.0625-5.6328125-2.6835938    c-0.0068359-0.0068359-0.0087891-0.0166016-0.015625-0.0234375c-0.0053711-0.0058594-0.0126953-0.0068359-0.0180664-0.0117188    c-0.9018555-0.9140625-1.6958008-2-2.3417969-3.1826172c-0.0141602-0.0371094-0.0410156-0.0683594-0.0600586-0.1044922    c-1.1054688-2.0605469-1.7651367-4.3876953-1.7651367-6.5361328c0-5.8886719,5.3476562-7.1245117,9.8334961-7.1245117    C28.4853516,16.3334961,33.8330078,17.5693359,33.8330078,23.4580078z M20.6669922,11    c0-1.8378906,1.4951172-3.3330078,3.3330078-3.3330078S27.3339844,9.1621094,27.3339844,11v3.5922852    C26.3037109,14.4272461,25.1972656,14.3334961,24,14.3334961s-2.3027344,0.0932617-3.3330078,0.2587891V11z     M12.3422852,17.7451172c-0.4550781-0.4550781-0.4550781-1.1953125,0-1.6503906s1.1953125-0.4550781,1.6503906,0    l0.925293,0.925293c-0.6040039,0.5214844-1.1225586,1.1074219-1.53125,1.7700195L12.3422852,17.7451172z M13.7563477,34.8242188    c-0.4550781-0.4550781-0.4550781-1.1953125,0-1.6503906l1.0908203-1.0908203    c0.4282227,0.6689453,0.9052734,1.296875,1.4150391,1.8857422l-0.8554688,0.8554688    C14.9516602,35.2792969,14.2114258,35.2792969,13.7563477,34.8242188z M34.2441406,33.1738281    c0.4550781,0.4550781,0.4550781,1.1953125,0,1.6503906s-1.1953125,0.4550781-1.6503906,0l-0.8564453-0.8564453    c0.5097656-0.5888672,0.9873047-1.2167969,1.4150391-1.8857422L34.2441406,33.1738281z M35.6582031,17.7451172    l-1.0449219,1.0454102c-0.4091797-0.6625977-0.9267578-1.2485352-1.53125-1.7700195l0.9257812-0.925293    c0.4550781-0.4550781,1.1953125-0.4545898,1.6503906-0.0004883C35.8789062,16.3154297,36,16.6083984,36,16.9199219    S35.8789062,17.5244141,35.6582031,17.7451172z\"\n          fill={color}\n        />\n      </g>\n    </g>\n  </svg>\n);\nexport default TurtleIcon;\n","import Card from \"./CardClass\";\nexport default abstract class AttributeCard extends Card {}\n","import Turtle from \"./cards/Turtle\";\nimport Ball from \"./cards/Ball\";\nimport Duck from \"./icons/Duck\";\nimport TurtleIcon from \"./icons/TurtleIcon\";\nimport Rainbow from \"./cards/Rainbow\";\nimport RainbowIcon from \"./icons/RainbowIcon\";\nimport Pen from \"./cards/PenFollow\";\nimport BrushIcon from \"./icons/BrushIcon\";\n\nconst CardIndex = {\n  turtle: [Turtle, TurtleIcon],\n  ball: [Ball, Duck],\n  rainbow: [Rainbow, RainbowIcon],\n  pen: [Pen, BrushIcon]\n} as any;\nexport default CardIndex;\n","import AttributeCard from \"../AttributeCard\";\nimport p5 from \"p5\";\nimport Card from \"../CardClass\";\n\nexport default class Rainbow extends AttributeCard {\n  constructor(\n    p: p5,\n    world: Matter.World,\n\n    x: number = 0,\n    y: number = 0,\n    child?: Card\n  ) {\n    super(\"rainbow\");\n    this.child = child;\n  }\n  public getEffect(cb: (name: string, payload: any) => void) {\n    if (this.child) {\n      this.child.getEffect(cb);\n    }\n    cb(\"rainbow\", null);\n  }\n  public cancel() {\n    if (this.child) {\n      this.child.cancel();\n    }\n  }\n}\n","import * as React from \"react\";\n\nconst RainbowIcon = ({ color }: any) => (\n  <svg viewBox=\"0 0 100 125\" width=\"50\">\n    <g>\n      <path\n        fill={color}\n        d=\"M77.385,72.358h-5.818C69.078,62.729,60.409,55.59,50,55.59s-19.078,7.14-21.566,16.769h-5.819   C25.213,59.617,36.506,50,50,50C63.494,50,74.787,59.617,77.385,72.358z M50,38.821c-19.678,0-36.01,14.601-38.728,33.537h5.693   C19.629,56.501,33.384,44.41,50,44.41c16.615,0,30.371,12.091,33.035,27.948h5.693C86.01,53.422,69.678,38.821,50,38.821z    M50,27.642c-25.852,0-47.205,19.597-50,44.717h5.671C8.428,50.306,27.206,33.231,50,33.231c22.795,0,41.572,17.074,44.328,39.127   H100C97.205,47.238,75.852,27.642,50,27.642z\"\n      />\n    </g>\n  </svg>\n);\nexport default RainbowIcon;\n","import AttributeCard from \"../AttributeCard\";\nimport Card from \"../CardClass\";\nimport p5 from \"p5\";\n\nexport default class Pen extends AttributeCard {\n  constructor(\n    p: p5,\n    world: Matter.World,\n\n    x: number = 0,\n    y: number = 0,\n    child?: Card\n  ) {\n    super(\"pen\");\n    this.child = child;\n  }\n  public getEffect(cb: (name: string, payload: any) => void) {\n    if (this.child) {\n      this.child.getEffect((name, payload) => {\n        if (name === \"rainbow\") {\n          cb(\"pen\", { rainbow: true });\n        } else {\n          cb(name, payload);\n          cb(\"pen\", { rainbow: false });\n        }\n      });\n    } else {\n      cb(\"pen\", { rainbow: false });\n    }\n  }\n  public cancel() {\n    if (this.child) {\n      this.child.cancel();\n    }\n  }\n}\n","import * as React from \"react\";\nconst BrushIcon = ({ color }: any) => (\n  <svg viewBox=\"0 0 24 30\" width=\"36\">\n    <g>\n      <path\n        d=\"M3.5,17.2c-0.6,0.6-0.8,1.3-1.1,2c-0.3,1-0.6,1.8-1.9,2.2c-0.3,0.1-0.4,0.4-0.4,0.6c0,0.3,0.2,0.5,0.5,0.6   c1,0.3,1.9,0.4,2.8,0.4c2.1,0,3.6-0.7,4.4-1.5c0.6-0.6,0.9-1.3,0.9-2.1s-0.3-1.6-0.9-2.1C6.6,16,4.6,16,3.5,17.2z M6.8,20.5   c-0.7,0.7-2.2,1.3-4.3,1.1c0.6-0.6,0.9-1.4,1.1-2.1C3.8,19,4,18.4,4.4,18.1c0,0,0,0,0,0c0.7-0.7,1.8-0.7,2.5,0   c0.3,0.3,0.5,0.8,0.5,1.2C7.3,19.8,7.2,20.2,6.8,20.5z\"\n        fill={color}\n      />\n      <path\n        d=\"M23.7,1.3c-0.5-0.5-1-1-8.4,5c-3.4,2.8-7,6-7.5,6.5c-0.6,0.6-0.9,1.3-0.9,2.1c0,0.8,0.3,1.6,0.9,2.1   C8.4,17.7,9.2,18,9.9,18c0.8,0,1.6-0.3,2.1-0.9c0.5-0.5,3.7-4.1,6.5-7.5C24.7,2.3,24.2,1.7,23.7,1.3z M8.7,16.2   c-0.3-0.3-0.5-0.8-0.5-1.2c0-0.5,0.2-0.9,0.5-1.2c0.1-0.1,0.3-0.3,0.5-0.4c0.9,0.6,1.8,1.5,2.4,2.4c-0.2,0.2-0.3,0.4-0.4,0.5   C10.5,16.9,9.4,16.9,8.7,16.2z M12.5,14.8c-0.6-0.9-1.5-1.7-2.3-2.3c3.1-2.7,9.6-8.3,12.1-9.7C20.8,5.2,15.2,11.7,12.5,14.8z\"\n        fill={color}\n      />\n    </g>\n  </svg>\n);\nexport default BrushIcon;\n","import * as React from \"react\";\nimport reactable from \"reactablejs\";\nimport { C, depth, shiftLeafX } from \"./Data\";\nimport interact from \"interactjs\";\nimport CardIndex from \"./calcifer/CardIndex\";\n\nexport const CARD_WIDTH = 165 / 2;\n\nexport const CARD_HEIGHT = 230 / 2;\n\nexport const GUTTER_SIZE = 10;\n\ninterface ISCProps {\n  getRef: any;\n  x: number;\n  y: number;\n  angle: number;\n  dropping: boolean;\n  cardData: C;\n  allCards: C[];\n  mousedown: boolean;\n  onSetCoords(dy: number, dx: number, id: string): void;\n  ond(parent: string, child: string): void;\n  onLift(id: string): void;\n  isUnrelated(isUnrelated: C[], id1: string, id2: string): boolean;\n}\n\nconst StaticCard: React.FC<any> = ({ cardData, dropping }: any) => {\n  const Icon = CardIndex[cardData.name][1];\n  return (\n    <div\n      style={{\n        width: CARD_WIDTH,\n        height: CARD_HEIGHT,\n        backgroundColor: dropping ? \"#6BCAFF\" : \"#FFFFFF\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        border: \"1px solid black\",\n        alignItems: \"center\",\n        cursor: \"grab\",\n        zIndex: 10\n      }}\n    >\n      <Icon color={cardData.color} />\n    </div>\n  );\n};\n\nconst SC: React.FC<ISCProps> = (props: ISCProps) => {\n  const {\n    getRef,\n    x,\n    y,\n    dropping,\n    cardData,\n    onSetCoords,\n    ond,\n    onLift,\n    mousedown,\n    isUnrelated,\n    allCards\n  } = props;\n\n  const c = <StaticCard cardData={cardData} dropping={dropping} />;\n  const isSingleton = cardData.child === undefined && !cardData.hasParent;\n  const selfcontain = (\n    <div\n      style={{\n        position: \"absolute\",\n        left: x,\n        top: y,\n        opacity: mousedown ? 0.5 : 1,\n        transition: \"opacity 0.25s, transform 0.25s\",\n        transform: `rotate(${isSingleton ? cardData.angle : 0}deg)`,\n        boxSizing: \"border-box\",\n        touchAction: \"none\",\n        zIndex: mousedown ? 1000 : 10\n      }}\n      data-card-id={cardData.instanceid}\n      ref={getRef}\n    >\n      {c}\n    </div>\n  );\n  if (!cardData.child) {\n    return selfcontain;\n  }\n  const child = (\n    <Card\n      cardData={\n        mousedown\n          ? shiftLeafX(\n              cardData.child,\n              cardData.coords.x + CARD_WIDTH / 5,\n              CARD_WIDTH / 5,\n              cardData.coords.y\n            )\n          : cardData.child\n      }\n      allCards={allCards}\n      onSetCoords={onSetCoords}\n      onDrop={ond}\n      onLift={onLift}\n      isUnrelated={isUnrelated}\n    />\n  );\n  return (\n    <>\n      {selfcontain}\n      {child}\n    </>\n  );\n};\n\ninterface ICardProps {\n  cardData: C;\n  allCards: C[];\n  onSetCoords(dy: number, dx: number, id: string): void;\n  onDrop(parent: string, child: string): void;\n  onLift(id: string): void;\n  isUnrelated(cards: C[], id1: string, id2: string): boolean;\n}\n\nconst Reactable = reactable(SC);\n\nconst Card: React.FC<ICardProps> = ({\n  cardData,\n  onSetCoords,\n  onDrop,\n  onLift,\n  isUnrelated,\n  allCards\n}: ICardProps) => {\n  const [dropping, setDropping] = React.useState(false);\n\n  const [mousedown, setMousedown] = React.useState(false);\n  const isHead = cardData.child !== undefined && !cardData.hasParent;\n\n  // This doesn't actually help since reactable's a HOC\n  const dropzone = React.useMemo(\n    () => ({\n      ondragenter: () => setDropping(true),\n      ondragleave: () => setDropping(false),\n      ondrop: ({ relatedTarget }: any) => {\n        onDrop(cardData.instanceid, relatedTarget.dataset.cardId);\n        setDropping(false);\n      },\n      overlap: 0.1,\n      accept: ({ dropzone, draggableElement }: any) => {\n        if (draggableElement.dataset.cardId) {\n          return (\n            isUnrelated(\n              allCards,\n              cardData.instanceid,\n              draggableElement.dataset.cardId as string\n            ) && cardData.instanceid !== draggableElement.dataset.cardId\n          );\n        } else return false;\n      }\n    }),\n    [allCards, cardData.instanceid, isUnrelated, onDrop]\n  );\n\n  const c = (\n    <Reactable\n      draggable={\n        {\n          inertia: true,\n          onend: () => onLift(cardData.instanceid),\n          onmove: ({ dy, dx }: any) => onSetCoords(dy, dx, cardData.instanceid),\n          modifiers: [\n            interact.modifiers.restrictRect({\n              restriction: document.body\n            })\n          ]\n        } as any\n      }\n      dropzone={dropzone}\n      dropping={dropping}\n      onDown={() => {\n        setMousedown(true);\n      }}\n      onUp={() => {\n        setMousedown(false);\n      }}\n      mousedown={mousedown}\n      cardData={cardData}\n      onSetCoords={onSetCoords}\n      onLift={onLift}\n      ond={onDrop}\n      allCards={allCards}\n      isUnrelated={isUnrelated}\n      {...cardData.coords}\n    />\n  );\n  return (\n    <>\n      <div\n        style={{\n          display: isHead && !mousedown ? \"initial\" : \"none\",\n          position: \"absolute\",\n          width: depth(cardData) * (CARD_WIDTH + GUTTER_SIZE) + GUTTER_SIZE,\n          height: CARD_HEIGHT + 20,\n          left: cardData.coords.x - GUTTER_SIZE,\n          top: cardData.coords.y - GUTTER_SIZE,\n          backgroundColor: \"tan\",\n          borderRadius: \"10px\",\n          zIndex: 10\n        }}\n      />\n      {c}\n    </>\n  );\n};\n\nexport { Card, StaticCard };\n","import * as p5 from \"p5\";\nimport Matter from \"matter-js\";\nimport Thing from \"./ThingCard\";\nimport { C } from \"../Data\";\nimport CardIndex from \"./CardIndex\";\nimport Card from \"./CardClass\";\n\nexport default class Env {\n  public mouse: Matter.Mouse;\n  public mouseConstraint: Matter.MouseConstraint;\n  public canvas: p5.Renderer;\n  public p: p5;\n  public engine: Matter.Engine;\n  public rainbowMode = false;\n  public startMillis = 0;\n\n  public things: Thing[] = [];\n\n  constructor(p: p5) {\n    this.p = p;\n    this.p.setup = this.Setup;\n    this.p.windowResized = this.windowResized;\n    this.p.draw = this.draw;\n    this.engine = Matter.Engine.create();\n\n    // this.p.preload = this.preload;\n  }\n  public windowResized = () => {\n    this.p.resizeCanvas(this.p.windowWidth, this.p.windowHeight / 2);\n  };\n  public onDrop = (card: C) => {\n    const constructed = this.construct(card);\n    if (constructed instanceof Thing) {\n      this.addThing(constructed);\n    } else {\n      constructed.getEffect((name, payload) => {\n        if (name === \"rainbow\") {\n          this.rainbowMode = !this.rainbowMode;\n        }\n      });\n      // Env-wide attrs or x/y placeholder\n    }\n  };\n  public construct = (card: C): Card => {\n    // NOTE: coords.x/y are card specific\n    return new CardIndex[card.name][0](\n      this.p,\n      this.engine.world,\n      card.coords.x,\n      card.coords.y,\n      card.child ? this.construct(card.child) : undefined\n    );\n  };\n  public addThing = (thing: Thing) => {\n    thing.Setup();\n    thing.getEffect((name, payload) => {\n      this.things.push(payload);\n    });\n  };\n  public Setup = () => {\n    this.canvas = this.p.createCanvas(\n      this.p.windowWidth,\n      this.p.windowHeight / 2\n    );\n    this.mouse = Matter.Mouse.create(this.canvas.elt);\n    const mouseParams = {\n      mouse: this.mouse,\n      constraint: {\n        stiffness: 0.1,\n        angularStiffness: 0.95\n      } as any\n    };\n    this.mouseConstraint = Matter.MouseConstraint.create(\n      this.engine,\n      mouseParams\n    );\n    this.engine.world.gravity.y = 0;\n\n    this.things.forEach(t => t.Setup());\n\n    this.startMillis = this.p.millis();\n    this.mouseConstraint.mouse.pixelRatio = this.p.pixelDensity();\n    Matter.World.add(this.engine.world, this.mouseConstraint);\n    const walls = [\n      Matter.Bodies.rectangle(\n        0,\n        this.p.windowHeight / 2 + 50,\n        this.p.windowWidth,\n        50,\n        { isStatic: true }\n      ),\n      Matter.Bodies.rectangle(0, -50, this.p.windowWidth, 50, {\n        isStatic: true\n      }),\n      Matter.Bodies.rectangle(-50, 0, 50, this.p.windowHeight / 2, {\n        isStatic: true\n      }),\n      Matter.Bodies.rectangle(\n        this.p.windowWidth - 50,\n        0,\n        50,\n        this.p.windowHeight / 2,\n        {\n          isStatic: true\n        }\n      )\n    ];\n    Matter.World.add(this.engine.world, walls);\n    Matter.Engine.run(this.engine);\n  };\n  public draw = () => {\n    // Matter.Engine.update(this.engine);\n    if (this.rainbowMode) {\n      this.p.colorMode(this.p.HSB, 1000);\n      this.p.background((this.p.millis() - this.startMillis) % 1000, 500, 400);\n    } else {\n      this.p.background(\"#322931\");\n    }\n    this.things.forEach(t => {\n      t.draw();\n    });\n  };\n}\n","import * as React from \"react\";\nimport p5 from \"p5\";\nimport Env from \"./calcifer/env\";\nimport reactable from \"reactablejs\";\nimport { C } from \"./Data\";\nimport { CARD_WIDTH, CARD_HEIGHT } from \"./Card\";\n\nconst Canv = ({ getRef, theref }: any) => {\n  const [sk, setSk] = React.useState<any>(null);\n  React.useImperativeHandle(theref, () => ({\n    onDrop(card: C) {\n      sk.onDrop({\n        ...card,\n        coords: {\n          x: card.coords.x + CARD_WIDTH / 2,\n          y: card.coords.y + CARD_HEIGHT / 2\n        }\n      });\n    }\n  }));\n  const ref = React.useCallback((node: any) => {\n    if (node !== null) {\n      const sketch = (p: p5) => {\n        const e = new Env(p);\n        setSk(e);\n        return e;\n      };\n      new p5(sketch, node);\n    }\n  }, []);\n\n  return (\n    <div ref={getRef}>\n      <div ref={ref} />\n    </div>\n  );\n};\n\n// use `as any` to coerce\nconst Reactable = React.forwardRef((props: any, ref: any) => {\n  const sub: React.FC = React.useMemo(\n    () => (ps: any) => <Canv ref={ref} {...ps} />,\n    [ref]\n  );\n  const Cl = React.useMemo(() => reactable(sub), [sub]);\n  return <Cl {...props} />;\n});\n\ninterface IProps {\n  dropped(id: string, cb: (card: C) => void): void;\n}\n\nconst Canvas: React.FC<IProps> = ({ dropped }: IProps) => {\n  const ref = React.useRef<any>();\n  return (\n    <Reactable\n      dropzone={\n        {\n          accept: ({ dropzone, draggableElement }) => {\n            if (draggableElement.dataset.cardId) {\n              return true;\n            } else return false;\n          },\n          ondrop: ({ relatedTarget }) => {\n            dropped(relatedTarget.dataset.cardId, (c: C) => {\n              if (ref && ref.current) {\n                ref.current.onDrop(c);\n              }\n            });\n          },\n          overlap: 0.5\n        } as Interact.DropzoneOptions\n      }\n      theref={ref}\n    />\n  );\n};\n\nexport default Canvas;\n","import React, { useState } from \"react\";\nimport { Card, CARD_WIDTH, CARD_HEIGHT, GUTTER_SIZE } from \"./Card\";\nimport {\n  C,\n  setCoords,\n  putIn,\n  lift,\n  isUnrelated,\n  dropDelete,\n  findInAllByID\n} from \"./Data\";\nimport uniqid from \"uniqid\";\nimport Canvas from \"./Canvas\";\nimport CardIndex from \"./calcifer/CardIndex\";\n\nconst createCard = (name: string, x: number, y: number): C => ({\n  name,\n  instanceid: uniqid(\"card-\"),\n  // color: \"#\" + (0x1000000 + Math.random() * 0xffffff).toString(16).substr(1, 6),\n  color: \"#000000\",\n  hasParent: false,\n  coords: { x, y },\n  isTemplate: true,\n  angle: 0\n});\n\ninterface IState {\n  cards: C[];\n}\n\nconst setAllCoords = (dy: number, dx: number, id: string, cards: C[]) =>\n  cards.map((card: C) => setCoords(dy, dx, id, card));\n\nconst allCards = (bottomY: number) =>\n  Object.keys(CardIndex).map((name: string, index: number) =>\n    createCard(name, (CARD_WIDTH + GUTTER_SIZE) * index + GUTTER_SIZE, bottomY)\n  );\n\nconst App: React.FC = () => {\n  const allcards = allCards(window.innerHeight - CARD_HEIGHT - GUTTER_SIZE);\n  const [state, setState] = useState<IState>({\n    cards: allcards\n  });\n\n  return (\n    <div style={{ width: \"100%\", height: \"100%\" }}>\n      <Canvas\n        dropped={(id: string, cb: (card: C) => void) => {\n          setState(prevState => {\n            const [found, deleted] = dropDelete(id, prevState.cards);\n            cb(found);\n            return {\n              ...prevState,\n              cards: deleted\n            };\n          });\n        }}\n      />\n      {state.cards.map((card: C) => (\n        <Card\n          key={card.instanceid}\n          cardData={card}\n          allCards={state.cards}\n          onDrop={(parentID: string, childID: string) =>\n            setState(prevState => ({\n              ...prevState,\n              cards: putIn(prevState.cards, parentID, childID)\n            }))\n          }\n          onLift={(id: string) =>\n            setState(prevState => ({\n              ...prevState,\n              cards: lift(prevState.cards, id)\n            }))\n          }\n          onSetCoords={(dy, dx, id) => {\n            setState(prevState => {\n              const c = findInAllByID(id, prevState.cards);\n              const newcards = c.isTemplate\n                ? [\n                    ...setAllCoords(dy, dx, id, prevState.cards),\n                    createCard(c.name, c.coords.x, c.coords.y)\n                  ]\n                : setAllCoords(dy, dx, id, prevState.cards);\n              return {\n                ...prevState,\n                cards: newcards\n              };\n            });\n          }}\n          isUnrelated={isUnrelated}\n        />\n      ))}\n      <div\n        style={{\n          bottom: 0,\n          position: \"fixed\",\n          width: \"100%\",\n          backgroundColor: \"rgba(255,255,255,0.5)\",\n          zIndex: 0,\n          height: CARD_HEIGHT + GUTTER_SIZE * 2\n        }}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}